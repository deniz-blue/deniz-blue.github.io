import{r as s,w as y,O as C}from"./chunk-EF7DTUVF-pxdf6ITT.js";import{j as e}from"./jsx-runtime-BjG_zV1W.js";import{u as j,a as I,b,L as h,M as v,B as E,F as w,U as S}from"./MusicPlayerContext-4BNy-b-i.js";import{I as G}from"./Image-DHPU1VLF.js";import"./LanguageContext-DM0QwpTO.js";import{a as g}from"./notifications.store-8uNrJnAf.js";import"./use-isomorphic-effect-BNO9nc8e.js";import"./polymorphic-factory-Cf4ufNdz.js";const x="/assets/IMAGE_DEPTH_BG-BSKhaJT-.png",B="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAAALRJREFUOBHtk0sSgCAMQ8Hx/ldWBFNDqfxGdrrpN4/IqHOLHv/CPag/tWOJGAq+3mvumAJW0QLSOG7sOCxfzgrBpN3IBPgVquHsFDNEwELtNzS/jnsvsObUYixz/IPlupddBX166Qe5jhz9AhgS5LFkx2oubzWSCEMSUothSWjIqRJnJTuGJltAsxELTdEggBiW5B4qkSrTkuUYbFOAoX3GM+0Ra8NQV7XVIQghanivjhAfpSe9CxcmJTWuYwAAAABJRU5ErkJggg==",M=()=>(j("ARE WE CONNECTED?"),e.jsxs("div",{className:"pageBackground",style:{display:"flex",alignContent:"center",alignItems:"center",justifyContent:"center",justifyItems:"center",backgroundImage:`url("${x}")`,backgroundPosition:"center center"},children:[Array(12).fill(0).map((i,t)=>e.jsx(G,{className:"depthOverlay",style:{"--i":t.toString()},src:x},t)),e.jsx("img",{src:B,style:{zIndex:10,opacity:.7}})]})),T="/assets/tree-DOnJeJ13.gif",N=()=>e.jsx("div",{className:"pageBackground",children:e.jsx("div",{className:"fullscreen",style:{backgroundImage:`url("${T}")`,backgroundPosition:"center center",backgroundRepeat:"no-repeat"}})}),L=()=>{const{myBurdenIsDead:i}=I(),[t]=s.useState(()=>[1,-1].map(r=>Array(128).fill(0).map((l,n)=>{const c=Math.floor(Math.random()*4)*5;return{key:r*(n+1),color:r>0?"#97257a":"#7463aa",size:c,top:Math.random()/2*100+(r==1?80:0)-20+"%",left:Math.random()*100+"%"}})).flat());return e.jsxs("div",{className:"pageBackground",style:{backgroundImage:"linear-gradient(#250630, #63173d)",height:"100vh"},children:[t.map(({key:r,size:l,color:n,top:c,left:d})=>e.jsx("div",{style:{backgroundColor:n,opacity:.7,width:l,height:l,position:"absolute",top:c,left:d}},r)),e.jsx("img",{src:"/assets/img/detail/oneshot/NikoPromoTransparent.png",style:{position:"absolute",bottom:"-60px",maxHeight:"200px",marginLeft:"1rem"}}),e.jsx("div",{className:"pageBackground",style:{opacity:i?1:0,backgroundColor:"black",zIndex:2},children:e.jsx("img",{src:"/assets/img/detail/oneshot/NikoDead.png",style:{position:"absolute",bottom:"0px",maxHeight:"200px",marginLeft:"1rem"}})})]})},P=()=>{const[{type:i}]=b();return e.jsxs("div",{children:[i==="oneshot"&&e.jsx(L,{}),i==="depth"&&e.jsx(M,{}),i==="man"&&e.jsx(N,{})]})},O=[{title:"Fear of the Unknown",artist:"Lena Raine",cover:"celestefarewell.jpg",file:"Fear of the Unknown.mp3"},{title:"world.execute(me);",artist:"Mili",cover:"miraclemilk.jpg",file:"worldexecuteme.m4a"},{title:"Confessions of a Rotten Girl",artist:"SAWTOWNE",cover:"ConfessionsOfARottenGirl.png",file:"ConfessionsOfARottenGirl.mp3"},{title:"Medicine",romanji:"Igaku",artist:"Sasuke Haraguchi",originalTitle:"イガク",cover:"igaku.png",file:"igaku.mp3"},{title:"Flower of Transformation",romanji:"Bake no Hana",originalTitle:"化けの花",artist:"NAKISO",cover:"mizu5.png",file:"bakenohana.mp3"},{title:"Substitute",romanji:"Hitogawari",originalTitle:"ヒトガワリ",artist:"KikuoHana",file:"hitogawari.mp3",cover:"kikuohana2.png"},{title:"Take Me To The Beach (feat. Ado)",file:"TakeMeToTheBeach.mp3",cover:"TakeMeToTheBeach.png",artist:"Imagine Dragons"},{title:"A Fool Moon Night",artist:"THE KOXX",cover:"thekoxx.png",file:"afoolmoonnight.mp3"}],R=({children:i})=>{const t=s.useRef(null),r=s.useRef(null),l=s.useRef(null),[n,c]=s.useState(null),[d,W]=s.useState(!1),[k,J]=s.useState(!1);s.useEffect(()=>{let o=new Audio;return t.current=o,()=>{var a;(a=r.current)==null||a.close(),o.pause(),o.remove(),t.current=null}},[]),s.useEffect(()=>{if(!t.current)return;const o=new AbortController,{signal:a}=o;return t.current.addEventListener("playing",()=>{g.hide("music-error")},{signal:a}),()=>o.abort()},[]),s.useEffect(()=>{if(!t.current)return;const o=new AbortController,{signal:a}=o;return t.current.addEventListener("ended",()=>{if(!n)return;const u=O;let p=u.indexOf(n);if(p==-1)return;let m=p+1;m>=u.length&&(m=0);let f=u[m];f&&c(f)},{signal:a}),()=>o.abort()},[n]),s.useEffect(()=>{if(n)return g.show({id:"music-nowplaying",title:e.jsx(h,{en:"Now Playing",tr:"Şimdi Çalıyor"}),message:n.title}),()=>void g.hide("music-nowplaying");g.hide("music-nowplaying")},[n]);const A=()=>{var o;(o=t.current)==null||o.play().then(()=>{r.current=new AudioContext;let a=r.current.createMediaElementSource(t.current);l.current=r.current.createAnalyser(),a.connect(l.current),a.connect(r.current.destination)}).catch(a=>{if(a instanceof DOMException&&a.name=="NotAllowedError"){g.show({id:"music-error",message:e.jsx(h,{en:"Can't play music, please click anywhere",tr:"Müzik çalınamıyor, herhangi bir yere tıklayın"}),autoClose:!1,position:"top-center",color:"yellow"});const u=()=>A();window.addEventListener("click",u,{once:!0})}})};return s.useEffect(()=>{t.current&&(t.current.pause(),t.current.src=n?`/assets/music/${n.file}`:"",n&&A())},[n]),e.jsx(v.Provider,{value:{ref:t,loading:d,playing:k,currentSong:n,analyser:l,audioContext:r,changeCurrentSong:c},children:i})},K=y(function(){return e.jsx(E,{children:e.jsx(w,{children:e.jsx(S,{children:e.jsxs(R,{children:[e.jsx(P,{}),e.jsx(C,{})]})})})})});export{K as default};
