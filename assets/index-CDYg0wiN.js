import{a as r,p as e,w,q as x,O as k}from"./chunk-EPOLDU6W-NKXA0r0j.js";import{L as p,c as M,P as S}from"./audio-context-BYrdCAxe.js";import{f as s,C as I,L as b}from"./LanguageContext-CalE12Bu.js";import"./polymorphic-factory-DGY1L3hH.js";import"./Text-Cxb0bJK7.js";import"./index-C7Pc1S5q.js";const j=r.createContext({ref:{current:null},analyser:{current:null},audioContext:{current:null},currentSong:null,loading:!0,playing:!1,changeCurrentSong:()=>{}}),G=[{title:"Fear of the Unknown",artist:"Lena Raine",cover:"celestefarewell.jpg",file:"Fear of the Unknown.mp3"},{title:"world.execute(me);",artist:"Mili",cover:"miraclemilk.jpg",file:"worldexecuteme.m4a"},{title:"Confessions of a Rotten Girl",artist:"SAWTOWNE",cover:"ConfessionsOfARottenGirl.png",file:"ConfessionsOfARottenGirl.mp3"},{title:"Medicine",romanji:"Igaku",artist:"Sasuke Haraguchi",originalTitle:"イガク",cover:"igaku.png",file:"igaku.mp3"},{title:"Flower of Transformation",romanji:"Bake no Hana",originalTitle:"化けの花",artist:"NAKISO",cover:"mizu5.png",file:"bakenohana.mp3"},{title:"Substitute",romanji:"Hitogawari",originalTitle:"ヒトガワリ",artist:"KikuoHana",file:"hitogawari.mp3",cover:"kikuohana2.png"},{title:"Take Me To The Beach (feat. Ado)",file:"TakeMeToTheBeach.mp3",cover:"TakeMeToTheBeach.png",artist:"Imagine Dragons"},{title:"A Fool Moon Night",artist:"THE KOXX",cover:"thekoxx.png",file:"afoolmoonnight.mp3"}],y=({children:a})=>{const t=r.useRef(null),A=r.useRef(null),i=r.useRef(null),[o,g]=r.useState(null),[C,N]=r.useState(!1),[h,U]=r.useState(!1);r.useEffect(()=>{let n=new Audio;return t.current=n,()=>{A.current?.close(),n.pause(),n.remove(),t.current=null}},[]),r.useEffect(()=>{if(!t.current)return;const n=new AbortController,{signal:l}=n;return t.current.addEventListener("playing",()=>{s.hide("music-error")},{signal:l}),()=>n.abort()},[]),r.useEffect(()=>{if(!t.current)return;const n=new AbortController,{signal:l}=n;return t.current.addEventListener("ended",()=>{if(!o)return;const c=G;let m=c.indexOf(o);if(m==-1)return;let u=m+1;u>=c.length&&(u=0);let f=c[u];f&&g(f)},{signal:l}),()=>n.abort()},[o]),r.useEffect(()=>{if(o)return s.show({id:"music-nowplaying",title:e.jsx(p,{en:"Now Playing",tr:"Şimdi Çalıyor"}),message:o.title}),()=>{s.hide("music-nowplaying")};s.hide("music-nowplaying")},[o]);const d=()=>{t.current?.play().then(()=>{A.current=new AudioContext;let n=A.current.createMediaElementSource(t.current);i.current=A.current.createAnalyser(),n.connect(i.current),n.connect(A.current.destination)}).catch(n=>{if(n instanceof DOMException&&n.name=="NotAllowedError"){s.show({id:"music-error",message:e.jsx(p,{en:"Can't play music, please click anywhere",tr:"Müzik çalınamıyor, herhangi bir yere tıklayın"}),autoClose:!1,position:"top-center",color:"yellow"});const l=()=>d();window.addEventListener("click",l,{once:!0})}})};return r.useEffect(()=>{t.current&&(t.current.pause(),t.current.src=o?`/assets/music/${o.file}`:"",o&&d())},[o]),e.jsx(j.Provider,{value:{ref:t,loading:C,playing:h,currentSong:o,analyser:i,audioContext:A,changeCurrentSong:g},children:a})},E="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAAALRJREFUOBHtk0sSgCAMQ8Hx/ldWBFNDqfxGdrrpN4/IqHOLHv/CPag/tWOJGAq+3mvumAJW0QLSOG7sOCxfzgrBpN3IBPgVquHsFDNEwELtNzS/jnsvsObUYixz/IPlupddBX166Qe5jhz9AhgS5LFkx2oubzWSCEMSUothSWjIqRJnJTuGJltAsxELTdEggBiW5B4qkSrTkuUYbFOAoX3GM+0Ra8NQV7XVIQghanivjhAfpSe9CxcmJTWuYwAAAABJRU5ErkJggg==",R="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAGYktHRAAAAAAAAPlDu38AAAAHdElNRQfpCAoOASJktxbgAAAA6UlEQVQ4y9WTIQ7CQBBFXwmqWGpBo6u5CdwBzQHQWDTcBF2NBguWWjAz4bMM7Ur4yaZN+/flZaeFX0/hN4/XszUwAu7ARks5nRS4AuZSPgLbRCLsOGgoxQUwA2optwbYCqxOOjfbe0iBEwNWQGmrTuwcpp0ZcPaCAqdSwq6VAXYCrJJOaXs/gFEUSgILkwMsgTGZGeQWc6OGZzkPPctvaW2dkKGo4cVeXq3Yl9a6J9sLxH/KntcgIlM3awy4VFA0lMaAE+KpupkD31KkDzpMHRaaRUPpM6XL7Kthh6kDl10b+z5sNXXgn+cJ6No9ST9X3LMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjUtMDgtMTBUMTQ6MDE6MzQrMDA6MDABpoTaAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDI1LTA4LTEwVDE0OjAxOjM0KzAwOjAwcPs8ZgAAACh0RVh0ZGF0ZTp0aW1lc3RhbXAAMjAyNS0wOC0xMFQxNDowMTozNCswMDowMCfuHbkAAAAASUVORK5CYII=",L=M()((a,t)=>({ref:{current:null}})),O=()=>{const{ref:a}=L();return e.jsxs("div",{id:"SOUL",ref:a,children:[e.jsx("div",{className:"soul heart",style:{backgroundImage:`url("${E}")`}}),e.jsx("div",{className:"soul blur",style:{backgroundImage:`url("${R}")`}})]})},T=({providers:a,children:t})=>e.jsx(e.Fragment,{children:a.reduceRight((A,i)=>e.jsx(i,{children:A}),t)}),v=()=>null,J=w(function(){return e.jsxs(T,{providers:[y],children:[e.jsx(S,{}),e.jsx(O,{}),e.jsx(v,{}),e.jsx(k,{})]})}),F=x(function(){return e.jsx(I,{my:"xl",h:"90vh",children:e.jsx(b,{})})});export{F as HydrateFallback,J as default};
