import{p as a,a as g,R as S}from"./chunk-EPOLDU6W-NKXA0r0j.js";import{a as ae,g as re,O as oe,i as le,d as T,T as ie,P as ce,G as z,L as ge,f as Ce}from"./LanguageContext-CalE12Bu.js";import{h as ue,i as de,j as fe,m as Ee,B as m,s as L}from"./polymorphic-factory-DGY1L3hH.js";import{T as Be}from"./Text-Cxb0bJK7.js";function K(e){ae(()=>{typeof e=="string"&&e.trim().length>0&&(document.title=e.trim())},[e])}var _={root:"m_7f854edf"};const he={position:{bottom:0,right:0},zIndex:re("modal"),withinPortal:!0},Ie=Ee((e,{zIndex:s,position:t})=>({root:{"--affix-z-index":s?.toString(),"--affix-top":L(t?.top),"--affix-left":L(t?.left),"--affix-bottom":L(t?.bottom),"--affix-right":L(t?.right)}})),X=ue((e,s)=>{const t=de("Affix",he,e),{classNames:A,className:r,style:l,styles:f,unstyled:C,vars:n,portalProps:i,zIndex:o,withinPortal:E,position:h,attributes:p,...w}=t,Q=fe({name:"Affix",classes:_,props:t,className:r,style:l,classNames:A,styles:f,unstyled:C,attributes:p,vars:n,varsResolver:Ie});return a.jsx(oe,{...i,withinPortal:E,children:a.jsx(m,{ref:s,...Q("root"),...w})})});X.classes=_;X.displayName="@mantine/core/Affix";const Qe=()=>g.useContext(le),ct=e=>{const{language:s}=Qe(),r=e[s].split(/(#\w+#)/).map((l,f)=>{if(l[0]=="#"&&l[l.length-1]=="#"){const C=l.substring(1,l.length-1);return C in e||console.warn(`[@alan404/react-localization > Localized] Interpolation with key '${C}' not defined in props. If this is intentional, define it in props with undefined or null.`),a.jsx(g.Fragment,{children:e[C]},f)}else return a.jsx("span",{children:l},f)});return a.jsx(g.Fragment,{children:r})},G=e=>{let s;const t=new Set,A=(i,o)=>{const E=typeof i=="function"?i(s):i;if(!Object.is(E,s)){const h=s;s=o??(typeof E!="object"||E===null)?E:Object.assign({},s,E),t.forEach(p=>p(s,h))}},r=()=>s,C={setState:A,getState:r,getInitialState:()=>n,subscribe:i=>(t.add(i),()=>t.delete(i))},n=s=e(A,r,C);return C},we=(e=>e?G(e):G),me=e=>e;function pe(e,s=me){const t=S.useSyncExternalStore(e.subscribe,S.useCallback(()=>s(e.getState()),[e,s]),S.useCallback(()=>s(e.getInitialState()),[e,s]));return S.useDebugValue(t),t}const H=e=>{const s=we(e),t=A=>pe(s,A);return Object.assign(t,s),t},O=(e=>e?H(e):H),ye={showTerminal:!1,showDevice:!1,showPamphlet:!1,showPamphletV2:!0,showCountdown:!1,showWD:!1,rain:!1,sunShattered:!1},$=O()(()=>ye),xe="/assets/IMAGE_DEPTH_4-O8gd5XC3.png",ke="/assets/AUDIO_ANOTHERHIM-D8FEBsaZ.ogg",be=e=>c(e,e),c=(e,s)=>typeof e=="object"&&e!==null?{x:e.x||0,y:e.y||0}:{x:e||0,y:s||0},Z=e=>typeof e=="object"&&e?c(e):be(e),b=(...e)=>e.map(Z).reduce((s,t)=>c(s.x+t.x,s.y+t.y)),U=(...e)=>e.map(Z).reduce((s,t)=>c(s.x*t.x,s.y*t.y)),ve=(e,s)=>{let t=Z(e),A=Z(s);return c(t.x/A.x,t.y/A.y)};c(0,0);c(1,1);const We=(e,s)=>{const t=g.useRef(e);t.current=e,g.useEffect(()=>{let A=performance.now();const r=()=>{performance.now()-A>=s&&(t.current(),A=performance.now()),l=requestAnimationFrame(r)};let l=requestAnimationFrame(r);return()=>{cancelAnimationFrame(l)}},[])},F=(e,s={})=>{const t=g.useRef(null),A=g.useRef(null),r=g.useRef(null),l=n=>{let{x:i,y:o}=typeof s.size=="function"?s.size(n):c(s.size?.x&&s.size?.x>0?s.size?.x:n.clientWidth,s.size?.y&&s.size?.y>0?s.size?.y:n.clientHeight);n.width=i,n.height=o};g.useEffect(()=>{const n=t.current;if(!n)return;l(n);const i=n.getContext("2d",{alpha:!0,desynchronized:!0});return i?(A.current=i,r.current=e(i),()=>{r.current?.destroy?.(),A.current=null}):s?.onFail?.()},[e,t]);const f=g.useCallback(()=>{r.current?.update?.(1),A.current&&A.current.clearRect(0,0,A.current.canvas.width,A.current.canvas.height),r.current?.draw()},[s.noClear]);We(f,s.delay||30);const C=g.useCallback(()=>{t.current&&l(t.current)},[t,s.size]);return T("resize",C),{ref:t}},M=()=>{const e=g.useRef(null),s=g.useCallback(()=>{e.current?.play().catch(()=>{})},[e]);return T("click",s,{once:!0}),e};class je{siner;alpha;xstretch;ystretch;o_insurance;depth;b_insurance;OBSPEED;constructor(){this.siner=0,this.alpha=.2,this.xstretch=1,this.ystretch=1,this.o_insurance=0,this.depth=4,this.OBSPEED=.02,this.b_insurance=-.2}destroy(){}step(){this.siner+=1,this.OBSPEED>0&&(this.alpha=Math.sin(this.siner/34)*.2),this.ystretch+=this.OBSPEED,this.xstretch+=this.OBSPEED,this.b_insurance<0&&(this.b_insurance+=.01),this.ystretch>2&&(this.o_insurance+=.01,this.o_insurance>=.5&&this.destroy())}shouldDraw(){return this.siner<150&&this.siner>2}getAlpha(){return Math.max(0,.2+this.alpha-this.o_insurance+this.b_insurance)}}const Se=()=>{K("ARE WE CONNECTED?");const e=g.useCallback(A=>{let r=[],l=new Image;l.src=xe;let f=0,C=0,n=.5;return{update(){if(f+=1,C+=n,C>=20){let i=new je;i.depth=5+f,i.OBSPEED=.01*n,i.destroy=()=>r=r.filter(o=>o!==i),r.unshift(i),f>=6e4&&(f=0),C=0}for(let i of r)i.step()},draw(){if(l.complete)for(let i of r){if(!i.shouldDraw())continue;let o=i.getAlpha();A.globalAlpha=o;const E=l.width*i.xstretch,h=l.height*i.ystretch;A.drawImage(l,160-E/2,120-h/2,E,h)}}}},[]),{ref:s}=F(e,{size:c(320,240)}),t=M();return a.jsxs("div",{className:"pageBackground",children:[a.jsx("canvas",{className:"pageBackground",style:{objectFit:"cover",imageRendering:"crisp-edges"},ref:s}),a.jsx("audio",{src:ke,ref:t,autoPlay:!0,loop:!0})]})},Le="/assets/tree-DOnJeJ13.gif",ze="/assets/man-DVTDGMKe.ogg",Re=()=>{const e=M();return K("* "),a.jsxs("div",{className:"pageBackground",children:[a.jsx("div",{className:"fullscreen",style:{backgroundImage:`url("${Le}")`,backgroundPosition:"center center",backgroundRepeat:"no-repeat"}}),a.jsx("audio",{src:ze,loop:!0,autoPlay:!0,ref:e})]})},ee=()=>{let e=49734321;return()=>(e=e+2127912214+(e<<12)&4294967295,e=(e^3345072700^e>>>19)&4294967295,e=e+374761393+(e<<5)&4294967295,e=(e+3550635116^e<<9)&4294967295,e=e+4251993797+(e<<3)&4294967295,e=(e^3042594569^e>>>16)&4294967295,(e&268435455)/268435456)},Ze=()=>{const e=$(r=>r.sunShattered),s=te(r=>r.background.type=="oneshot"&&r.background.data.withNiko===!1),t=r=>[1,-1].map(l=>Array(500).fill(0).map((f,C)=>{const n=r()/2*100*l+(l==-1?100:0),i=`${n}%`,o=Math.abs(n-50)/50,p=2+o*10;if(r()>o)return null;const w=o*.5,Q=r();return{key:l*(C+1),color:l*(r()>.2?1:-1)>0?"#97257a":"#7463aa",size:p,top:i,left:r()*110-5+"%",opacity:w,animrand:Q,dir:l}})).flat().filter(l=>!!l),A=g.useMemo(()=>t(ee()),[]);return a.jsxs("div",{className:"scrollableBackground fullSize",style:{backgroundImage:"linear-gradient(#250630, #63173d)"},children:[A.map(({key:r,size:l,color:f,top:C,left:n,opacity:i,animrand:o,dir:E})=>a.jsx("div",{className:"oneshot-square",style:{backgroundColor:f,opacity:i,width:l,height:l,position:"absolute",top:C,left:n,"--animrand":o*100+"ms","--dir":E}},r)),!s&&a.jsx("img",{src:"/assets/img/detail/oneshot/NikoPromoTransparent.png",style:{position:"absolute",bottom:"calc(-60px)",maxHeight:"200px",maxWidth:"70vw",marginLeft:"1rem"}}),a.jsx("div",{className:"pageBackground",style:{opacity:e?1:0,backgroundColor:"black",zIndex:2},children:!s&&a.jsx("img",{src:"/assets/img/detail/oneshot/NikoDead.png",style:{position:"absolute",bottom:"0px",maxHeight:"200px",maxWidth:"80vw",marginLeft:"1rem"}})})]})},x=(e=1)=>Math.round(Math.random()*e),Y=e=>e[x(e.length-1)],Oe="/assets/rain-XCcjA8b9.ogg",Fe=["#0000FF","#0055EE","#0a205a","#0515a6"],Me=()=>{const e=g.useCallback(A=>{let r=new Set,l=c(),f=.4;const C=.002;return{update(n){for(let o of r)o.y+o.size*3>=A.canvas.height?(o.y=A.canvas.height,o.splash>1?r.delete(o):o.splash+=C*o.vy*n):(o.vy+=o.sinkSpeed*.03*n,o.x+=l.x*n,o.y+=o.vy*n+l.y*n);let i=Math.floor(f*A.canvas.width);for(;r.size<i;)r.add({x:x(A.canvas.width),y:-x(A.canvas.height*2),vy:0+Math.random(),color:Y(Fe),sinkSpeed:x(15)+15,size:x(2)+3,splash:0,alpha:Math.random()+.1})},draw(){for(let n of r)if(A.fillStyle=n.color,A.globalAlpha=n.alpha,n.splash){const i=n.size*2,o=n.size*2,E=-1,w=(d=>B=>E*Math.pow(B-d.x,2)+d.y)(c(1,1))(n.splash*2)*o,Q=n.size/2*(1.5-n.splash),u=n.size/2;A.fillRect(n.x+n.splash*i,n.y-w-u,Q,Q),A.fillRect(n.x-n.splash*i,n.y-w-u,Q,Q)}else A.fillRect(n.x,n.y,n.size/2,n.size*2+n.vy*.1)}}},[]),{ref:s}=F(e,{}),t=M();return a.jsxs("div",{className:"fullscreen",children:[a.jsx("canvas",{className:"fullscreen",ref:s}),a.jsx("audio",{src:Oe,ref:t,loop:!0,autoPlay:!0})]})},Ye=()=>{const e=g.useCallback(t=>{t.lineWidth=1,t.imageSmoothingEnabled=!1;const A="#5A0D36",r="#6E1244",l="#290427",f="#4B092E",C="#2A0428",n="#B1184B",i="#1E021F",o="#FF59BE",E=(u,d,B,I)=>{t.fillStyle=B,t.fillRect(u.x,u.y,d.x,d.y),I&&(t.strokeStyle=I,t.strokeRect(u.x+.5,u.y+.5,d.x,d.y))},h=(u,d,B,I,y,j)=>{for(let v=0;v<B.x;v++)for(let k=0;k<B.y;k++)E(b(u,U(b(d,I),c(v,k))),d,y,j)},p=(u,d,B)=>{t.save(),t.globalAlpha=.5;let I=t.createRadialGradient(u.x,u.y,0,u.x,u.y,B);I.addColorStop(0,d+"ff"),I.addColorStop(1,d+"00"),t.beginPath(),t.fillStyle=I,t.arc(u.x,u.y,B,0,Math.PI*2,!1),t.fill(),t.restore()},w=({pos:u,padding:d,windowSize:B,windowSpacing:I,windowAmount:y,color:j,outlineColor:v,windowColor:k,windowUnderlineColor:W,windowLitIndicies:P,windowLitColor:V,windowLitSize:Ae})=>{const D=c(d.x+B.x*y.x+I.x*(y.x-1)+d.x,t.canvas.height-u.y-1);if(E(u,D,j,v),h(b(u,d),B,y,I,k),W&&h(b(u,d,c(0,B.y)),c(B.x,1),y,c(I.x,I.y+B.y-1),W),V&&P?.length&&Ae)for(let N of P){let J=U(c(N%y.x,Math.floor(N/y.y)),b(B,I)),ne=b(u,d,J,ve(B,2));p(ne,o,15),E(b(u,d,J),B,V)}return{buildingSize:D}},Q=({x:u,y:d,hl:B,frontWindowAmount:I,sideWindowAmount:y})=>{const k=Math.floor(t.canvas.height/14)-5,{buildingSize:W}=w({pos:c(u,d),padding:c(4,12),color:A,outlineColor:r,windowColor:C,windowSize:c(8,9),windowSpacing:c(5,5),windowAmount:c(I,k),windowUnderlineColor:n,windowLitColor:o,windowLitSize:15,windowLitIndicies:B});return w({pos:c(W.x+u+1,d),padding:c(4,12),color:l,outlineColor:f,windowColor:i,windowSize:c(4,9),windowSpacing:c(3,5),windowAmount:c(y,k)}),{frontSize:W}};return{draw(){t.lineJoin="miter",t.lineCap="square",t.strokeStyle="blue";let u=ee(),d=4;for(let B of Array(20).fill(0)){let I=[...new Set(Array(5).fill(0).map(()=>Math.floor(u()*1e3)))],{frontSize:y}=Q({x:d,y:t.canvas.height-Math.floor(t.canvas.height*u()*.7),frontWindowAmount:5,sideWindowAmount:3,hl:I});d+=y.x,d+=u()>.9?50:0,d+=4}}}},[]),{ref:s}=F(e,{delay:500,size:t=>{const r=480/t.clientHeight*t.clientWidth;return c(r,480)}});return a.jsx("div",{className:"pageBackground",children:a.jsx("canvas",{className:"pageBackground",style:{imageRendering:"crisp-edges",backgroundImage:"linear-gradient(#18031A, #23051F, #3B0929)"},ref:s})})},q=c(320,180),Xe=g.memo(()=>{const e=R(s=>s.loading);return a.jsxs("div",{className:"pageBackground",style:{backgroundImage:"url('/assets/img/detail/sky.png')",backgroundRepeat:"repeat",backgroundAttachment:"fixed"},children:[a.jsx(Pe,{}),a.jsx(ie,{mounted:e,duration:200,children:s=>a.jsx(X,{position:{bottom:20,right:20},zIndex:1e3,style:{...s,pointerEvents:"none"},children:a.jsx(ce,{p:"xs",children:a.jsxs(z,{align:"center",justify:"center",children:[a.jsx(Be,{children:"Loading..."}),a.jsx(ge,{size:"sm"})]})})})})]})}),R=O()((e,s)=>({worker:null,loading:!0,canvas:null,offscreen:null,handleCanvasRef:t=>{if(!t||s().canvas===t)return;e({canvas:t}),t.width=t.clientWidth,t.height=t.clientHeight;const A=t.transferControlToOffscreen(),r=new Worker(new URL("/assets/effects.worker-A99i4rvT.js",import.meta.url),{type:"module"});return r.postMessage({type:"init",data:A},[A]),e({worker:r}),r.postMessage({type:"scroll",data:c(0,window.scrollY)}),r.onmessage=l=>{l.data.type==="initialized"&&e({loading:!1})},()=>{}}})),Pe=()=>{g.useEffect(()=>{let s=new AbortController;return window.addEventListener("scroll",()=>{R.getState().worker?.postMessage({type:"scroll",data:c(0,window.scrollY)})},{signal:s.signal}),window.addEventListener("resize",()=>{R.getState().worker?.postMessage({type:"dimensionsChange",data:c(window.innerWidth,window.innerHeight)})},{signal:s.signal}),()=>{s.abort()}},[]);const e=R(s=>s.handleCanvasRef);return a.jsx("canvas",{ref:s=>{try{return e(s)}catch(t){console.error("StarfieldCanvas: Failed to set canvas ref",t),Ce.show({title:"Starfield Error",message:"Failed to initialize starfield background.",color:"red"})}},className:"fullscreenDynamic",style:{objectFit:"contain",aspectRatio:q.x/q.y,imageRendering:"pixelated"}})},Ve="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUAAAABkCAYAAAD32uk+AAABVklEQVR4Xu3UMQEAIBAAIX81gBXsn1CDHIRg9rlvAQSNAIEqAQJZAgSyBAhkCRDIEiCQJUAgS4BAlgCBLAECWQIEsgQIZAkQyBIgkCVAIEuAQJYAgSwBAlkCBLIECGQJEMgSIJAlQCBLgECWAIEsAQJZAgSyBAhkCRDIEiCQJUAgS4BAlgCBLAECWQIEsgQIZAkQyBIgkCVAIEuAQJYAgSwBAlkCBLIECGQJEMgSIJAlQCBLgECWAIEsAQJZAgSyBAhkCRDIEiCQJUAgS4BAlgCBLAECWQIEsgQIZAkQyBIgkCVAIEuAQJYAgSwBAlkCBLIECGQJEMgSIJAlQCBLgECWAIEsAQJZAgSyBAhkCRDIEiCQJUAgS4BAlgCBLAECWQIEsgQIZAkQyBIgkCVAIEuAQJYAgSwBAlkCBLIECGQJEMgSIJAlQCBLgECWAIEsAQJZAgSyPqdxf731IlQ5AAAAAElFTkSuQmCC",De="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUAAAAC0CAYAAADl5PURAAAFEUlEQVR4Xu3aTW4cNxSF0WiSVWRDWXE2lFVkkqAN2BFarS5WFYv1yHvOyIYtNX8eP8CGPn4DCPXx61cAYQQQiCWAQCwBBGIJIBBLAIFYAgjEEkAglgACsQQQiCWAQCwBBGIJIBBLAIFYAgjEEkAglgACsQQQiCWAQCwBBGIJIBBLAIFYAgjEEkC4ye9//Pnvr9/s9M/ff3m7HThEuMiZwJ0hju0cFDS4K2YtBO84B0e8CnETsXuUOvS7B9EQru3u+fqOubvPkIOvOnhXMdD3SZo1c3besANMGUxDOUbKPB21NYct57f1PVZQboMtF1NNwqDcZcZ5SDL77E+9+BHePcDZL7+Sd+dMHavN/FKboTaRm8NqkXsnZqNcS9zmlxS+n+I2zH7itq7E6H0WvflZCRJnpEfvs49KjyntYiqdPetLeF9731SpAL5T/fJmOUfyVH87PRx9f9MEcI+qF77iWVNP1fnvpec7WjKAP60+CA8r39/Mesze1t32+IyZbZ1Pi6YD7PFBDz0u7PNaenw/tvW6/9WYvzpezWjL/Wz+BVjBqwfyrOXBMEbLfbXYutMv/wTe+gKAPZ4bU8mXAJ4loHCtljdb9R22rH2k7gH8rOolwIyueqvV3+lV+374sfGjH1D94GBGR9/jVVZ+58tuDGZQLXZnzRbLqRYLs1steHtVC2SpxcDs0gPXw8hIDvsgqEy4ahgZv4ehHzarXo9j9OWuqNdd8FXifMZt+FnVB5U4jEcducOW8z3yfato2R8X/hzgbBdw1TncYbazr2S2OXDX7V7d7WUB3GuGi6xyVmfNcNYjzHif7q5dy/2WCWCrWQdgtnN+5d3Zr7C/at6d98pGztJ0Adwy+9Csdh/sN/sM93blm1gugDCLltB99z5bvnYW3+1xBAGECewJnjfdTgChqFfR8177EkAo5FX0HrzTawggEEsAgVgCCMQSQMr47v+/vmN2OUsAucXe2B1httkigPwwIkgjmGf2EMCTVgnHLMwrPd3+eFccaFHsY8XZ4F7Pb7PEQzXoxzxfZmXueH0zzeNPty/Yw+ijdficN2e0ztksltqMx/2/PYPq3Dhjz6xVM+3CW939uF8Nx+g1vVrDHqPXS66zs7rX0A+729UP+crL67n2K9f5Ss+1wx5bs/72D1d25FFuHeZdjuzlWdW9bemxd7J8nnU/B3iRV0FpPeszX3vWq8+u6nEmW+sddW7MSQDZtBWZasw0rQSwgBGB6XHPI9a5R489kU0AJ1EtPlcxj4wkgBOaLYZmjKoEEIglgEAsAQRiCSAQSwCBWAIIxBJAIJYAArEEEIglgEAsAQRiCSAQSwCBWAIIxBJAIJYAArEEEIglgEAsAQRiCSAQSwCBWAIIxBJAIJYAArEEEIglgEAsAQRiCSAQSwCBWAIIxBJAIJYAArEEEIglgEAsAQRiCSAQSwCBWAIIxBJAIJYAArEEEIglgEAsAQRiCSAQSwCBWAIIxBJAIJYAArEEEIglgEAsAQRiCSAQSwCBWAIIxBJAIJYAArEEEIglgEAsAQRiCSAQSwCBWAIIxBJAIJYAArEEEIglgEAsAQRiCSAQSwCBWAIIxBJAIJYAArEEEIglgEAsAQRiCSAQSwCBWAIIxBJAIJYAArEEEIglgEAsAQRiCSAQSwCBWAIIxBJAIJYAArEEEIglgEAsAQRiCSAQSwCBWAIIxBJAIJYAArEEEIglgEAsAQRiCSAQ6z9XSjRpbTADpwAAAABJRU5ErkJggg==",Ne="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUAAAAC0CAYAAADl5PURAAAE9ElEQVR4Xu3aXW7cRhCF0egpG8qusp7syhvyU4KBIFtSOMO/7mY17zlPNiBpyO6qD7Chtz8AQr39+hNAGAEEYgkgEEsAgVgCCMQSQCCWAAKxBBCIJYBALAEEYgkgEEsAgVgCCMQSQCCWAAKxBBCIJYBALAEEYgkgEEsAgVgCCMQSQCCWAAKxBBCIJYBALAEEYgkgEEsAgVgCCMQSQCCWAAKxBBCIJYBALAEEYgkgEEsAgVgCCMQSQCCWAAKxBBCIJYBALAEEYgkgEEsAgVgCCMQSQCCWAAKxBBCIJYBALAEEYgkgEEsAG/nzr7///fWXnX7++Mc9wAUs3g5nIneGQEIfFuuEq4K4hWjCOktykQrxFEnSWYALVYjgEmG8t6vnrtJ8lXmQmV09UCNVGt40SXP2MGLWun9ABVsGZ+2wt/yMZGvnRxspczhqnoZ8SE8pAzGrUYOcaMbZrzYPpR6mhRmHIlG1RZjZq5l3zq9FHc6rQaEOS8sokYMmhPMTSVqIHyIxvC+RZI0B+UQMOUNw5/O2d+kTLnnvmcAZCTv1WaX92h3ADwmXdvRsoLfq+zfL7hwO4JLql3JWy7OCZ6ru0R3nv0kAq17YKGtn2OJ81j6Da7S42+ruPHubLm/pABIufhZL94MZHeXz/LU481bzvOVZVr9g5MMwxpY7dV8kaPJP4F4sIdDS996VC2DV6G05p6rPDnexZQ/36BrA6kHo9e7V3xtm0mtPH269qD0P7ghhhPaO7vljH6dbyKMvW5UownXKLd/dAreXIMI4Q5ctPW4tCCS0M3yZRLAGIYULAliBCPcjrOe1mk93sc4BbdRqKK+wZRGOvN+Wn8u7I+c7QvodLv4eYPqh7LF0fpW52+Nmu+tXZpuDXme/GMDvZjusK205z2rc77sZ727JDPdZ5aw3BbCVGS6mh5FnnOLVLN3hvF+9X2WznX3XAM56ib30PGvmMPtO3G2GuwZwzezD8Nmzc9zyjs++F+jr0gDOZkvMPjhXqE8AG1uKpDOGmgSwk6UQPjhvqEMAgVgCCMQSQCCWAHLas//vfMbMUYUAsmpv4I4wh1xBANllRAxHMPc8CCBN3SWQs7C/5/xvWB0orYliG3fczatn49IPP+qOg8BXVy/GHubxmAp3fPkDtGYYOWPrUpqzNraedy+XfvhZhpAz9iyfWfttz7lVN/xFDBKjnF3U0bO69Lyjn+G7pWe6k9WXu/oCyDV6+VrOes9nb/mcS3o+ezVfXrT3wXI/sy5Li1mv+u5H3q3qu/Tm9wB5aW0xHvOz9jWVjJr3pTPZ+tlnvpd9BJDNlhazMrPNGgHktGphbDHTI96pxXNyjgAy1IiwVGCv5iCAlDVbLO3SfAQQiCWAQCwBBGIJIBBLAIFYAgjEEkAglgACsQQQiCWAQCwBBGIJIBBLAIFYAgjEEkAglgACsQQQiCWAQCwBBGIJIBBLAIFYAgjEEkAglgACsQQQiCWAQCwBBGIJIBBLAIFYAgjEEkAglgACsQQQiCWAQCwBBGIJIBBLAIFYAgjEEkAglgACsQQQiCWAQCwBBGIJIBBLAIFYAgjEEkAglgACsQQQiCWAQCwBBGIJIBBLAIFYAgjEEkAglgACsQQQiCWAQCwBBGIJIBBLAIFYAgjEEkAglgACsQQQiCWAQCwBBGIJIBBLAIFYAgjEEkAglgACsf4DJa8johLY85EAAAAASUVORK5CYII=",Je="data:image/png;base64,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",Ge="data:image/png;base64,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",He="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUAAAAC0CAYAAADl5PURAAAFTUlEQVR4Xu3ba47kNBiGUWotsBBYOSwE1tIomqlWMJXEdpxL1XvOr56ROmXH/h615vL4BSDU4/srgDACCMQSQCCWAAKxBBCIJYBALAEEYgkgEEsAgVgCCMQSQCCWAAKxBBCIJYBALAEEYgkgEEsAgVgCCMQSQCCWAAKxBBCIJYBALAEEYgkgEEsAgVgCCMQSQCCWAAKxBBCIJYBALAEEYgkgEEsAgVgCCMQSQCCWAAKxBBCIJYBALAEEYgkgEEsAgVgCCMQSQCCWAAKxBBCIJYBALAEEYgkgEEsAgVgCCMQSQCCWAAKxBBCIJYBALAEEYgkgEEsAgVgCCMQSQCCWAAKxBBCIJYBALAEEYgkgEEsAgVgCCMQSQCCWAAKxBBCIJYBALAEEYgkgEEsAgVgCCMQSQCCWAAKxBBCIJYBALAEEYgkgEEsAgVgCCMQSQCCWAAKxBBCIJYBALAEEYgkgEEsAgVgCCMQSQCCWAAKxBBCIJYBALAEEYgkgEEsAgVgCCMQSQCCWAAKxBBCIJYBALAEEYgkgEEsAgVgCCMQSQCCWAAKxBBCIJYBALAEEYgkgEEsAgVgCCMQSQCCWAAKxBBCIJYBALAEEYgkgEEsAgVgCCMQSQCCWAAKxBBCIJYBALAEEYgkgEEsAgVgCCMQSQCCWAAKxBBCIJYBALAEEYgkgEEsAgVgCCMQSQCCWAAKxBBCIJYBALAEEYgkgEEsAgVhDA/j19fX1/YsdHo/H0HUBvNIdmlGx20MogT2qA1IG769/vr9s9vuv318eRhyBLauRKKO3pCeGZ0SwJIrA3P+CUBu9JT0xLIkjcIb/DP3e+JVGxLDGEcEURPh8j9HRW3JGDEeH8LnmP34TQ/hEpwXwnazFWgzh/fz594/OlT8kCWBhLX5zQgj39ozeUxm/iQD+VBu+khDCPZTBKwlgoTd6S8QQzjX1q3aOBfCn2hfWSwjhWFs/7ZVexW8SFcCjw1d65xDuvRf+GREjze9jzxzHBrDnZR3hTjE888yFkL2Oit/k4wLY84LOdlUMrzjr+XlctW/e1974TT42gL0v5E56o1DzZyBrB3+GtfPp3TcZyi6t3aUlNff/tgHs2TA/1Bz8kVrPTgx5etWj1vs0qZ2BywLYsynW1R76UUacqRhmetWhnvvUOgOHBbBn8fRpPfTRjjprMWy3Nc93+kuppbX23KfeGdgdwJ7Fsl/vgY9yxrlv7fFOw3yFpT8H3npvT1e9v7Xm9Nyr2v2+0hzAngWyz54DHu2M8x+x36uG+wytM9viqPe2tebWezXijkyaAti6SNqNOthRzjrzI/Z91DCfrWVG9xr1zmrW3Hu3Rt6VpgCO0LvpTzLyAEe44kzOfAejhvoKZ8/nU+s7a1ln73074s6cHkCu13sBrzD60rcO9hXuMpNr76p3ja13b/T5lwQwXOuFPNuoASj3eae/Yb7bDM7f1fSeRq2vPIPSnrOent3z/cM2B3ewNWRzd4jg6Plr2f8ReiK0x6v9tqxhVwBfffialoVBi9a7OHdFCFvnbr6/2jl69U6m7331+71q1zLa0h5a11MdwKUP3Kt1wbCm956eFcHaeZur3dPWLNU+55WtZ59hbf2961sN4NoHjtS7eKhRe4+PjGA5Z8811d792j081T73XSztf+8+VwP4tPThk70LgLOt3efJ6BDOZ2zrs2vmaesZa2qefwdbexy1j6oAwidaG7JREVz672ql3oFe28OW3s8coWXdR65TAGFhIPdGcJqtV88tHTngrBNAKJTRaglhOU/ls+aE73oCCCvmAVsLYTlHwvce/gXVssZYBcDeTQAAAABJRU5ErkJggg==",Ue="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUAAAAAdCAYAAADb97U3AAADbklEQVR4Xu2YW3YUMQxE6d3xzRpYFmvgm90NxznHE0eRbMmSX911f4BJt1SlVxKu1+v1+gEewZ+//95/z/z+9fPj8/RngnvGQ447gqw7WrPESC8c2dfsvBxlrXfQE8WFA3hPZh0FK97lWeHLq9nLykNI671Cw0hwAG8IHVor+Tt9D9EL0qvDQ7SHCMo6zNA3O98qcABvgOdI7DzcHl8Wdq5BhtZihOanHL0SHMCDyQPbM6x0oTKtWNd1Xe9/BCDNn8Wb5IVDE29HkseknXr1+omOdxo4gA+iHHY66NZF8B7CyLmTfEmfnwrtUUmvv7vVyAoO4MOpLVWJtBw9hxAz10+rX1KfAA8OIPgCFuwMuD6l3jz9JzorOIBAhFuyBBZrH6QelaBfMjiAQAVdtJlLZfk1O89zfucJ8017I1H2LL8zs487ggMIRLjFmrUwlqOnYcWcJw8r8nJ9o8zq4+4saRDYmxU/HUQfvJJZM97ykHS0nknM0gtwAI/ibr/WaY5BD7PrcxcfTwQH8BDokq3oW9LgyUs9ePDoiCLST4sd/N4R10CDeUjLNqN/NLc1J31fizXPTHo9RbBzXU6DPYBSc7lnwVikXlBG9KaWW5Ov9r4WTR4rWZcndoQ3Dx7t4JOPA8g186QCRwz0jnB9qRHh35ozUebteb9FhK8M1WeNTd/fAasH8Em1macU9o4HMHLRNHWJzDcCjYcaNX/a2LUYO6D1cSKjav8t6C5FpIY5XfSZBPfcKUh+uM895BpFx+Wg/fDkpLFaWHJJsS0xdkDyMZtct2g90f1g/w9wBclY0hJhcBdPFiTfpRfpmRZcPXpjaeFyesjz8f6gwWh/pyDVLNdH+roHWvsROTI0lxXTUI3Ga6ZkJ181ap5Heajl5JB0RMWxwOWkcblnnkxZH6k2tIZWpLgl3hy9UG1f6jFaFE2eoXml5zzQHLth8RzhxZIvY8lriW+Jm7DEBv1o+uLthSbHLL4ZiRDnLVA01JOkjz43Aim3hR6ds/NG5APr0PR6dI81GnrJ2k0GWoJGF2QGLY8ach3KWKNqo9U7Kj+4H9qZ4pg9Z1atVF+32BnLvRPaQj+hFuBeaGc7gsj90Ohu5at+8aloCsvRKjYAp2DZATr32nfpeytYLmAl2kZx7NA8AIAPLDEA4LHgAAIAHst/Q6xc8IiDIMAAAAAASUVORK5CYII=",qe="/assets/env_amb_worldmap-CgMQzMDB.ogg",Te=["#AAAACC","#DDDDFF","#CCCCDD","#F3F3F3","#F0FFFF"],Ke=["Times","Arial","Verdana"],_e=()=>{const e=g.useCallback(A=>{let r=new Set;const l=.5,f=.002,C=c(-1,0);return{update(n){for(let o of r)o.y+o.size>=A.canvas.height?(o.y=A.canvas.height-o.size,o.decay>1?r.delete(o):o.decay+=f*o.vy*n):(o.vy+=o.sinkSpeed*.01*n,o.x+=C.x*n,o.y+=o.vy*n+C.y*n);let i=Math.floor(l*A.canvas.width);for(;r.size<i;)r.add({x:x(A.canvas.width*2)-A.canvas.width*.5,y:-x(A.canvas.height*2),vy:0+Math.random(),color:Y(Te),font:Y(Ke),sinkSpeed:x(5)+1,size:x(2)+3,decay:0,alpha:Math.random()+.1,sway:x(10)+15})},draw(){for(let n of r){A.font=`${n.size}px ${n.font}`,A.fillStyle=n.color,A.globalAlpha=n.alpha-n.decay;const i=n.x+Math.sin(n.y/36)*n.sway,o=n.y;A.fillRect(i,o,n.size,n.size)}}}},[]),{ref:s}=F(e,{}),t=M();return g.useEffect(()=>{t.current&&(t.current.volume=.1)},[t]),a.jsxs("div",{className:"pageBackground fullscreen",children:[a.jsx("audio",{src:qe,ref:t,autoPlay:!0,loop:!0}),a.jsx("canvas",{className:"fullscreen",ref:s}),[[Ve,{}],[De,{}],[Ue,{backgroundSize:"25%",backgroundPositionY:"top",backgroundRepeat:"repeat-x",opacity:"0.2"}],[Ne,{}],[Je,{backgroundSize:"100%",backgroundPositionY:"bottom",backgroundRepeat:"repeat-x"}],[Ge,{backgroundSize:"12.5%",backgroundPositionY:"bottom",backgroundRepeat:"repeat-x"}],[He,{backgroundSize:"25%",backgroundPositionY:"bottom",backgroundRepeat:"repeat-x"}]].map(([A,r],l)=>a.jsx("div",{className:"pageBackground",style:{backgroundImage:`url(${A})`,backgroundSize:"cover",imageRendering:"pixelated",objectFit:"cover",...r}},l))]})},$e=()=>a.jsx("div",{}),et=({content:e,duration:s=500,styles:t})=>{const[A,r]=g.useState(0),[l,f]=g.useState([e,null]),C=g.useRef(null),n=g.useRef(null),i=g.useRef(null),o=g.useRef(null);return g.useEffect(()=>{r(E=>{const h=E?0:1;return f(p=>p.map((w,Q)=>Q==h?e??null:w)),h})},[e]),g.useEffect(()=>{const E=A==0?C:n,h=A==0?n:C;o.current?.cancel(),i.current=E.current?.animate({opacity:[0,1]},{fill:"forwards",duration:s})??null,o.current=h.current?.animate({opacity:[1,0]},{fill:"forwards",duration:s})??null,o.current?.addEventListener("finish",()=>{f(p=>p.map((w,Q)=>Q===A?w:null))})},[A,C,n,s]),a.jsx(m,{className:"swapper-wrap",style:t?.wrapper,children:l.map((E,h)=>a.jsx("div",{className:"swapper-content"+(h==A?" swapper-active":""),"aria-hidden":h!=A,ref:h?n:C,style:t?.content,children:E},h))})},tt=e=>{g.useEffect(()=>{const s=()=>{e({x:0,y:document.documentElement.scrollTop})},t=new AbortController;let A=!1;return window.addEventListener("scroll",()=>{A||(window.requestAnimationFrame(()=>{s(),A=!1}),A=!0)},{signal:t.signal}),s(),()=>t.abort()},[])},st=()=>{const e=g.useRef(null);return tt(({y:s})=>{e.current&&e.current.style.setProperty("--scroll-y",""+s)}),a.jsxs("div",{ref:e,className:"SanctuaryBackground",children:[a.jsx(m,{className:"parallax fade",w:"100%",mt:15,style:{"--depth":.7,opacity:.7},children:a.jsxs(z,{gap:0,align:"center",w:"100%",wrap:"nowrap",children:[a.jsx(m,{className:"arches fade",flex:1,ml:-50}),a.jsx(m,{className:"spire fade"}),a.jsx(m,{className:"arches fade",w:100})]})}),a.jsx(m,{className:"parallax fade",w:"100%",mt:120,style:{"--depth":.6,opacity:.9},children:a.jsxs(z,{gap:0,align:"end",w:"100%",wrap:"nowrap",children:[a.jsx(m,{className:"arches",w:"5vw"}),a.jsx(m,{className:"spire"}),a.jsx(m,{className:"arches",flex:1})]})}),a.jsx(m,{className:"parallax fade",mt:800,w:"100%",children:a.jsxs(z,{justify:"center",gap:0,align:"top",wrap:"nowrap",children:[a.jsx(m,{className:"spire fade",ml:280}),a.jsx(m,{className:"buttress fade",mt:200})]})}),a.jsx("div",{style:{position:"absolute",marginTop:640,right:"20vw",zIndex:-2,"--depth":.65},className:"parallax prophecy"})]})},At={type:"null",data:{}},te=O()((e,s)=>({background:At,setBackground:t=>e(A=>({background:t}))})),gt=()=>{const e=te(A=>A.background),s=$(A=>A.rain),t=g.useMemo(()=>a.jsxs(a.Fragment,{children:[s&&a.jsx(Me,{}),e.type==="starfield"&&a.jsx(Xe,{}),e.type==="oneshot"&&a.jsx(Ze,{}),e.type==="depth"&&a.jsx(Se,{}),e.type==="man"&&a.jsx(Re,{}),e.type==="refuge"&&a.jsx(Ye,{}),e.type==="winter"&&a.jsx(_e,{}),e.type==="aurora"&&a.jsx($e,{}),e.type==="sanctuary"&&a.jsx(st,{})]}),[JSON.stringify(e),s]);return a.jsx("div",{style:{position:"absolute",zIndex:-1,pointerEvents:"none",width:"100%",height:"100%",inset:0,minHeight:"100svh"},children:a.jsx(et,{content:t,duration:e.type=="null"&&e.data.fade!==!0?0:500,styles:{wrapper:{width:"100%",height:"100%"},content:{width:"100%",height:"100%"}}})})},se=O()((e,s)=>({audioContext:null,cache:new Map,getContext:()=>{if(s().audioContext)return s().audioContext;const t=new AudioContext;return e({audioContext:t}),t}})),nt=async e=>{const s=se.getState();if(s.cache.has(e))return s.cache.get(e);const A=await(await fetch(e)).arrayBuffer(),r=await s.getContext().decodeAudioData(A);return s.cache.set(e,r),r},at=async e=>{const t=se.getState().getContext(),A=await nt(e),r=t.createGain();r.gain.setValueAtTime(.5,0),r.connect(t.destination);const l=t.createBufferSource();l.buffer=A,l.connect(r),l.start(0)},Ct=e=>({play:()=>at(e).catch(console.error)});export{X as A,ct as L,gt as P,et as S,te as a,Ct as b,O as c,Qe as d,$ as u};
