import{u as H,L}from"./LanguageContext-Dp3_LK6K.js";import{j as w}from"./jsx-runtime-D_zvdyIk.js";import{a as c}from"./chunk-ZYFC6VSF-BZmslxjh.js";const v=()=>{};function oe(e){H(()=>{typeof e=="string"&&e.trim().length>0&&(document.title=e.trim())},[e])}const z={" ":"space",ArrowLeft:"arrowleft",ArrowRight:"arrowright",ArrowUp:"arrowup",ArrowDown:"arrowdown",Escape:"escape",Esc:"escape",esc:"escape",Enter:"enter",Tab:"tab",Backspace:"backspace",Delete:"delete",Insert:"insert",Home:"home",End:"end",PageUp:"pageup",PageDown:"pagedown","+":"plus","-":"minus","*":"asterisk","/":"slash"};function E(e){const t=e.replace("Key","").toLowerCase();return z[e]||t}function O(e){const t=e.toLowerCase().split("+").map(u=>u.trim()),r={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift"),plus:t.includes("[plus]")},s=["alt","ctrl","meta","shift","mod"],o=t.find(u=>!s.includes(u));return{...r,key:o==="[plus]"?"+":o}}function X(e,t,r){const{alt:s,ctrl:o,meta:u,mod:n,shift:a,key:P}=e,{altKey:i,ctrlKey:l,metaKey:f,shiftKey:d,key:D,code:x}=t;if(s!==i)return!1;if(n){if(!l&&!f)return!1}else if(o!==l||u!==f)return!1;return a!==d?!1:!!(P&&(r?E(x)===E(P):E(D??x)===E(P)))}function M(e,t){return r=>X(O(e),r,t)}function U(e,t,r=!1){return e.target instanceof HTMLElement?(r||!e.target.isContentEditable)&&!t.includes(e.target.tagName):!0}function C(e,t=["INPUT","TEXTAREA","SELECT"],r=!1){c.useEffect(()=>{const s=o=>{e.forEach(([u,n,a={preventDefault:!0,usePhysicalKeys:!1}])=>{M(u,a.usePhysicalKeys)(o)&&U(o,t,r)&&(a.preventDefault&&o.preventDefault(),n(o))})};return document.documentElement.addEventListener("keydown",s),()=>document.documentElement.removeEventListener("keydown",s)},[e])}const N=()=>c.useContext(L),ae=e=>{const{language:t}=N(),o=e[t].split(/(#\w+#)/).map((u,n)=>{if(u[0]=="#"&&u[u.length-1]=="#"){const a=u.substring(1,u.length-1);return a in e||console.warn(`[@alan404/react-localization > Localized] Interpolation with key '${a}' not defined in props. If this is intentional, define it in props with undefined or null.`),w.jsx(c.Fragment,{children:e[a]},n)}else return w.jsx("span",{children:u},n)});return w.jsx(c.Fragment,{children:o})},b={farewellBackground:!0,displayName:!0,displayDiscordGuild:!0,displayAboutMe:!0,displayPreviousWork:!0,displayBadges:!0,displayFeaturedProjects:!0,displayFriends:!0,displayNeoFetch:!0,displayUptime:!0,myBurdenIsDead:!1},B=c.createContext({...b,enable:()=>{},disable:()=>{},toggle:()=>{}}),ce=({children:e})=>{const[t,r]=c.useState(b),s=n=>r(a=>({...a,[n]:!0})),o=n=>r(a=>({...a,[n]:!1})),u=n=>r(a=>({...a,[n]:!a[n]}));return w.jsx(B.Provider,{value:{...t,enable:s,disable:o,toggle:u},children:e})},ue=()=>c.useContext(B),Q={musicPopout:!1},k=c.createContext({...Q,enable:()=>{},disable:()=>{},toggle:()=>{}}),le=({children:e})=>{const[t,r]=c.useState(Q),s=n=>r(a=>({...a,[n]:!0})),o=n=>r(a=>({...a,[n]:!1})),u=n=>r(a=>({...a,[n]:!a[n]}));return w.jsx(k.Provider,{value:{...t,enable:s,disable:o,toggle:u},children:e})},ie=()=>c.useContext(k),S={type:"starfield"},j=c.createContext([S,()=>{}]),fe=({children:e})=>{const[t,r]=c.useState(S);return C([["1",()=>r({type:"starfield"})],["2",()=>r({type:"depth"})],["3",()=>r({type:"man"})],["0",()=>r({type:"null"})],["4",()=>r({type:"oneshot"})]]),w.jsx(j.Provider,{value:[t,r],children:e})},de=()=>c.useContext(j),V=e=>g(e,e),g=(e,t)=>typeof e=="object"&&e!==null?{x:e.x||0,y:e.y||0}:{x:e||0,y:t||0},F=e=>typeof e=="object"&&e?g(e):V(e),K=(...e)=>e.map(F).reduce((t,r)=>g(t.x+r.x,t.y+r.y)),Y=(...e)=>e.map(F).reduce((t,r)=>g(t.x*r.x,t.y*r.y)),Z=(e,t)=>K(e,Y(t,-1));g(0,0);g(1,1);const G=c.createContext({current:null}),Pe=({children:e})=>{const t=c.useRef(null);return c.useEffect(()=>(t.current=new AudioContext,()=>void t.current?.close()),[]),w.jsx(G.Provider,{value:t,children:e})},R=()=>c.useContext(G),W=e=>{const t=R(),r=c.useRef(null);return c.useEffect(()=>{t.current&&fetch(e).then(s=>s.arrayBuffer()).then(s=>t.current.decodeAudioData(s)).then(s=>{r.current=s,console.log("Loaded",e)}).catch(console.error)},[t.current,e]),r},h=e=>{const t=R(),r=W(e);return{play:c.useCallback(()=>{if(!t.current||!r.current)return;t.current.state=="suspended"&&t.current.resume();const o=t.current.createBufferSource();o.buffer=r.current,o.connect(t.current.destination),o.start(0)},[t])}},m=(e,{pos:t,zIndex:r,opacity:s,blur:o})=>{t&&(e.style.transform=`translate(${t.x-11}px, ${t.y-11+window.scrollY}px)`),r!==void 0&&(e.style.zIndex=r?r.toString():""),s!==void 0&&(e.style.opacity=s.toString()),e.style.setProperty("--blur",o?"1":"0")},J=e=>{const t=e.getBoundingClientRect(),r=32,s=window.innerWidth,o=window.innerHeight;let u=0,n=0;t.left<r?u=t.left-r:t.right>s-r&&(u=t.right-(s-r)),t.top<r?n=t.top-r:t.bottom>o-r&&(n=t.bottom-(o-r)),(u!==0||n!==0)&&window.scrollBy({left:u,top:n,behavior:"smooth"})},q=e=>{let t=e.getAttribute("data-pos")||"center",r=e.getBoundingClientRect(),s=!!e.getAttribute("data-blur");const o=(A,y)=>{let p=e.getAttribute(A);return p!==null&&!isNaN(Number(p))?Number(p):y};let u=o("data-zindex",0);const n=4;let a=o("data-mt",n),P=o("data-mb",n),i=o("data-ml",n),l=o("data-mr",n),f="center",d="center";if(t!="center"){if(t?.includes("-")){let[A,y]=t.split("-");f=A.replace("left","start").replace("right","end"),d=y.replace("top","start").replace("bottom","end")}}let D;if(f=="center")D=r.x+r.width/2+l-i;else if(f=="start")D=r.x-i;else if(f=="end")D=r.x+r.width+l;else throw new Error("Invalid state");let x;if(d=="center")x=r.y+r.height/2+a-P;else if(d=="start")x=r.y-a;else if(d=="end")x=r.y+r.height+P;else throw new Error("Invalid state");return{pos:g(D,x),zIndex:u,blur:s}};function $(e,t,r){const s=e?.getBoundingClientRect(),o=s?g(s.left+s.width/2,s.top+s.height/2):g(),n=t.map(i=>{if(i==e)return null;const l=i.getBoundingClientRect(),f=g(l.left+l.width/2,l.top+l.height/2),d=Z(f,o),D=Math.hypot(d.x,d.y);let x=Math.atan2(d.y,d.x);const A=["right","down","left","up"][Math.round((x+Math.PI*2)%(Math.PI*2)/(Math.PI/2))%4];return{node:i,delta:d,dist:D,angle:x,direction:A}}).filter(i=>i!==null).sort((i,l)=>i.dist-l.dist).filter(i=>{if(r=="down")return i.delta.y>0;if(r=="up")return i.delta.y<0;if(r=="left")return i.delta.x<0;if(r=="right")return i.delta.x>0}),a=n.find(i=>i.direction=="up"||i.direction=="down"?i.delta.x==0:i.delta.y==0);return a?a.node:n[0]?.node??null}const _="data:audio/wav;base64,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",ee="/assets/UndertaleMenuDecision-DoSLgTJY.wav",te=c.createContext({ref:{current:null},selectables:[],setSelected:v,registerSelectable:v}),De=({children:e})=>{const t=c.useRef(null),[r,s]=c.useState([]),{play:o}=h(_),{play:u}=h(ee),n=c.useRef(null),a=l=>{let f=n.current,d=f!==l;if(n.current=l??null,d&&f?.removeAttribute("data-soul-selected"),n.current?.setAttribute("data-soul-selected","true"),!!t.current)if(n.current){d&&o();const{...D}=q(n.current);m(t.current,{opacity:1,...D})}else m(t.current,{pos:g(),opacity:0})},P=l=>{const f=$(n.current,r,l);f&&(a(f),f&&J(f))};C([["ArrowUp",()=>P("up")],["w",()=>P("up")],["ArrowDown",()=>P("down")],["s",()=>P("down")],["ArrowLeft",()=>P("left")],["a",()=>P("left")],["ArrowRight",()=>P("right")],["d",()=>P("right")],["Enter",()=>{let l=n.current?.firstChild;l&&(u(),l.click())}]]),c.useEffect(()=>{console.log("selectables updated",r),n.current&&!r.includes(n.current)&&(console.log("deselecting removed selectable"),a(null))},[r]);const i=c.useCallback(l=>{const f=new AbortController,d=f.signal;return s(D=>D.includes(l)?D:[...D,l]),l.addEventListener("mouseenter",()=>a(l),{signal:d}),()=>{s(D=>D.filter(x=>x!==l)),f.abort()}},[]);return w.jsx(te.Provider,{value:{ref:t,selectables:r,registerSelectable:i,setSelected:a},children:e})},T={showTerminal:!1,showDevice:!1,showPamphlet:!0},I=c.createContext([T,()=>{}]),xe=({children:e})=>{const[t,r]=c.useState(T);return w.jsx(I.Provider,{value:[t,s=>r({...t,...s})],children:e})},ge=()=>c.useContext(I);export{xe as A,fe as B,ce as F,ae as L,te as S,le as U,Pe as W,ue as a,de as b,De as c,C as d,ge as e,h as f,ie as g,oe as u,g as v};
